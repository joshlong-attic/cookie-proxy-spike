<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>name</title>
</head>
<body>
<h1 th:text="${name}">Your message will appear here</h1>
<script type="text/javascript">
    function getCookies() {
        const cookies = {};
        document.cookie.split(';').forEach(cookie => {
            const [name, value] = cookie.trim().split('=');
            cookies[name] = decodeURIComponent(value);
        });
        return cookies;
    }

    window.addEventListener('load', function () {
        console.log('Hello World!');
        console.log(document.cookie)
        const cookies = getCookies();
        const sessionId = cookies['JSESSIONID'];
        console.log(cookies)
        document.getElementById('currentSessionId').innerText = sessionId;

        document.getElementById('name').addEventListener('click', async function () {
            const result = await  window.fetch('/session', {
                headers: {'X-Session-ID':    document.getElementById('session').value }
            });
            const data = await result.json();
            console.log(data)

            document.getElementById('apiResult').innerText = data.name;

        })
    });



</script>
<div id="apiResult"></div>
<div id="currentSessionId"></div>
<input type="text" id="session" name="session"
       value="(the session id to override the default one)">
<button id="name">
    prove it
</button>

</body>
</html>